# GameTrad 游戏交易系统 - 更新说明

## 版本 1.3.1 (2024-07)

### 主要更新

1. **价格显示优化**
   - 银两行情和女娲石行情默认显示DD373平台的图表
   - 其他平台（7881、全部）可通过选择框切换
   - 平台选择框顺序调整为：DD373、7881、全部

2. **界面优化**
   - 优化了仪表盘布局，解决库存详情组件挤压月度收入图表的问题
   - 改进了仪表盘底部区域的均匀布局
   - 提高了界面响应速度和用户体验

3. **代码优化**
   - 优化了价格数据加载逻辑
   - 改进了图表绘制性能
   - 减少不必要的API请求
   - 修复了程序启动时主窗口默认最大化显示

4. **仪表盘功能改进**
   - 修改总收入数据计算方式，显示库存管理中所有物品的成交利润额总和
   - 卡片标题从"总收入"更新为"总利润额"，更准确反映数据含义
   - 优化了库存详情和月度收入图表的布局比例

5. **其他改进**
   - 修复了src/scripts/migrate_data.py文件中的缩进错误
   - 提高了程序整体稳定性
   - 优化了内存使用

### 详细变更

#### 价格行情优化
- 修改了`src/gui/tabs/silver_price_tab.py`文件中的平台选择逻辑
- 将默认选择平台从"全部"改为"DD373"
- 调整了平台选择框的顺序为：DD373、7881、全部
- 同步应用于`src/gui/tabs/nvwa_price_tab.py`文件

#### 仪表盘布局优化
- 修改了`src/gui/tabs/dashboard_tab.py`中的布局代码
- 创建了独立的左侧和右侧容器框架，分别容纳库存详情和月度收入图表
- 为左侧容器设置固定宽度，避免被右侧图表挤压
- 调整了图表尺寸参数，提供更均衡的视觉效果

#### 总利润计算优化
- 在`src/gui/tabs/dashboard_tab.py`中添加了`get_total_trading_profit`方法
- 修改了总收入计算逻辑，现在显示的是所有物品的成交利润额总和
- 将仪表盘卡片标题从"总收入"改为"总利润额"

#### 程序启动优化
- 修改了`src/gui/main_window.py`文件，添加窗口最大化代码
- 在窗口初始化时调用`self.root.state('zoomed')`实现默认最大化显示

#### 错误修复
- 修复了`src/scripts/migrate_data.py`文件中的缩进错误
- 更正了`close_connections`方法和`restore_database`方法中的if-else语句块缩进

## 版本 1.3.0 (2024-07)

### 主要更新
- 更新图标资源，改进程序快捷方式显示
- 优化安装程序配置，确保任务栏图标显示正确
- 修复其他已知问题和性能优化

## 版本 1.2.0 (2024-06)

### 主要更新
- 优化图表UI，解决中文字体乱码问题
- 改进X轴日期标签显示，实现均匀间距
- 增加物品搜索功能，支持实时过滤
- 显示所有库存管理物品，包括库存为0的物品
- 优化价格数据加载和缓存机制

## 版本 1.1.0 (2024-04)

### 主要更新
- 价格显示优化：修复了仪表盘中银两行情和女娲石行情数据的自动加载问题
- UI优化：改进了界面响应速度和用户体验
- 增加PyQt6版本：全新基于PyQt6的现代化界面版本

## 版本 1.0.0 (2024-02)

### 主要更新
- 首次发布，包含核心功能
- 支持库存管理、入库出库、交易监控和价格监控

## 安装说明

### 新用户安装
- 直接下载并运行`GameTrad_Setup_1.3.1.exe`安装程序

### 现有用户更新
- 方法1：下载并运行`GameTrad_Setup_1.3.1.exe`安装程序，将自动升级现有安装
- 方法2：使用程序内置的"检查更新"功能（菜单栏 -> 帮助 -> 检查更新）

## 注意事项
- 更新不会影响您的现有数据
- 建议更新前备份重要数据
- 如遇问题，请参考README.md中的常见问题解答或联系开发团队

---

感谢您使用GameTrad游戏交易系统！ 